# Periodic Sketch 论文笔记

阅读范围：

1. Introduction

2. Related Work

## 应用场景

1. 提高缓存命中率

2. 检测 **APT** 攻击（这种攻击一般具有周期性）

3. 数据周期性可作为机器学习模型预测网络负荷的优质特征

4. 监控可疑操作、协助生成用户画像

## 周期性数据探测的基准方案

+ **Bloom Filters**：利用向量的若干位来表示集合中元素的隶属关系，具有常数时间 / 空间复杂度，但不支持流的删除和记录流的多重性。

+ **Space Saving**：动态维护频率最高的若干元素，在容量超限时总是直接逐出频率最小的元素，而 **Unbiased Space Saving** 可以对任意子集和给出无偏估计。

## 关键评估指标

1. 内存占用量

2. 吞吐量

3. 准确率（**PR**：Precision Rate）

4. 召回率（**RR**：Recall Rate）

5. 平均绝对误差（**AAE**：Average Absolute Error）

## 核心组件

+ **Cover-Min Sketch**：获取当前到达元素距离上一次到达的时间间隔。

+ **GSU Sketch**：削弱不频繁元素对最小堆内频率估计值的高估影响。

> **TODO：**  
> **GSU** 的介绍不是很清楚，需要结合论文与代码，理解 **GSU** 究竟克服了什么瓶颈 

## 算法演变的基础

+ **CM Sketch**

由 `d` 个数组组成 `A1, A2...Ad`，每个数组包含 `w` 个计数器。

更新时通过 `d` 个哈希函数生成 `d` 个哈希值，同时更新对应的 `d` 个计数器，查询时返回这`d` 个计数器中的最小值作为估计值。

## 维护最大频率元素的算法

+ 记录所有元素：**CM**、**最小堆**、**ASketch**

+ 记录热点元素：**Space Saving**、**Lossy Counting**、**Cold Filter**

## Periodic Sketch 的两个要求

+ 对每个元素的处理是一次性的（One Pass）
  
+ 处理速度必须能赶上高速数据流，时间复杂度为 **O(1)**

现有周期模式挖掘算法时间复杂度在 **O(nlogn)** 到 **O(n^2)** 之间，不满足高速数据流的要求。
